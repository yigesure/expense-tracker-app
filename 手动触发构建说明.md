# 🎯 手动触发构建说明

当您需要在不推送代码的情况下构建APK时，可以使用GitHub Actions的手动触发功能。

## 🚀 操作步骤

### 1. 进入Actions页面
1. 打开您的GitHub仓库
2. 点击顶部的 `Actions` 标签页
3. 在左侧工作流列表中选择 `构建Android APK`

### 2. 手动触发构建
1. 点击右侧的 `Run workflow` 按钮
2. 在弹出的对话框中：
   - **Use workflow from**: 选择分支（通常选择 `main`）
   - **构建类型**: 选择构建类型
     - `release`: 发布版本（推荐）
     - `debug`: 调试版本
3. 点击绿色的 `Run workflow` 按钮确认

### 3. 监控构建进度
1. 构建开始后，页面会显示新的工作流运行
2. 点击运行记录查看详细进度
3. 构建过程大约需要8-12分钟

### 4. 下载构建结果
构建完成后：
1. 在构建详情页面找到 `Artifacts` 部分
2. 点击 `apk-builds` 下载压缩包
3. 解压后即可获得APK文件

## 📱 构建类型说明

### Release版本
- **特点**: 经过优化和混淆，体积更小，性能更好
- **用途**: 正式发布、分享给用户
- **签名**: 使用发布签名（需要配置Secrets）
- **文件名**: `记账应用-vX-release.apk`

### Debug版本
- **特点**: 包含调试信息，体积较大
- **用途**: 开发测试、问题调试
- **签名**: 使用调试签名
- **文件名**: `记账应用-vX-debug.apk`

## ⚡ 快速访问链接

将以下链接中的 `your-username` 和 `expense_tracker_app` 替换为您的实际仓库信息：

```
https://github.com/your-username/expense_tracker_app/actions/workflows/build-apk.yml
```

## 🔍 构建状态说明

| 状态 | 图标 | 说明 |
|------|------|------|
| 排队中 | 🟡 | 等待可用的运行器 |
| 运行中 | 🔵 | 正在执行构建步骤 |
| 成功 | ✅ | 构建完成，可以下载APK |
| 失败 | ❌ | 构建出错，需要检查日志 |
| 取消 | ⚪ | 手动取消或超时 |

## 🛠️ 故障排除

### 构建失败常见原因

1. **Secrets配置错误**
   - 检查密钥库相关的Secrets是否正确配置
   - 确认Base64编码是否正确

2. **代码问题**
   - 检查是否有编译错误
   - 确认所有依赖都能正常获取

3. **网络问题**
   - GitHub Actions服务器网络问题
   - 重新运行通常可以解决

### 如何查看详细错误信息

1. 点击失败的构建记录
2. 展开失败的步骤
3. 查看红色的错误信息
4. 根据错误信息进行相应修复

## 📋 构建前检查清单

在手动触发构建前，建议检查：

- [ ] 代码已提交到目标分支
- [ ] 所有必要的Secrets已配置
- [ ] 最近的提交没有明显的编译错误
- [ ] pubspec.yaml中的版本号已更新（如需要）

## 🎉 成功构建后

构建成功后，您将获得：

1. **多架构APK文件**
   - 通用版本（适用于所有设备）
   - ARM64版本（现代设备，推荐）
   - ARM32版本（较老设备）
   - x86_64版本（模拟器）

2. **自动发布**（仅main分支）
   - 自动创建GitHub Release
   - 包含版本说明和下载链接
   - 自动标记版本号

---

💡 **提示**: 建议在重要功能完成后手动触发一次构建，确保代码能够正常编译和打包。